% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/make_spatial_info.ndd.r
\name{make_spatial_info.ndd}
\alias{make_spatial_info.ndd}
\title{Build objects related to spatial information, and is exactly the same as JT FishStatUtils function except it uses my \code{Convert_EN_to_LL_Fn.ndd} and \code{Convert_LL_to_EastNorth_Fn.ndd} functions}
\usage{
make_spatial_info.ndd(
  n_x,
  Lon_i,
  Lat_i,
  Extrapolation_List,
  knot_method = "samples",
  Method = "Mesh",
  grid_size_km = 50,
  grid_size_LL = 1,
  fine_scale = FALSE,
  Network_sz_LL = NULL,
  iter.max = 1000,
  randomseed = 1,
  nstart = 100,
  DirPath = paste0(getwd(), "/"),
  Save_Results = FALSE,
  LON_intensity,
  LAT_intensity,
  crs.en,
  crs.ll,
  ...
)
}
\arguments{
\item{n_x}{the number of vertices in the SPDE mesh (determines the spatial resolution when Method="Mesh")}

\item{Lon_i}{Longitude for each sample}

\item{Lat_i}{Latitude for each sample}

\item{Extrapolation_List}{the output from \code{Prepare_Extrapolation_Data_Fn}}

\item{knot_method}{whether to determine location of GMRF vertices based on the location of samples \code{knot_method=`samples`} or extrapolation-grid cells within the specified strata \code{knot_method='grid'}}

\item{Method}{a character of either "Grid" or "Mesh" where "Grid" is a 2D AR1 process, and "Mesh" is the SPDE method with geometric anisotropy}

\item{grid_size_km}{the distance between grid cells for the 2D AR1 grid (determines spatial resolution when Method="Grid") when not using \code{Method="Spherical_mesh"}}

\item{grid_size_LL}{the distance between grid cells for the 2D AR1 grid (determines spatial resolution when Method="Grid") when using \code{Method="Spherical_mesh"}}

\item{fine_scale}{a Boolean indicating whether to ignore (\code{fine_scale=FALSE}) or account for (\code{fine_scale=TRUE}) fine-scale spatial heterogeneity;  See details for more informatino}

\item{Network_sz_LL}{data frame with "parent_s", "child_s", "dist_s", "Lat", "Lon", default=NULL only needed with Method == "Stream_network"}

\item{crs.en}{Character string of the crs for the E-N projection}

\item{crs.ll}{Character string of the crs for the current lat-lon projections}

\item{...}{additional arguments passed to \code{INLA::inla.mesh.create}}
}
\value{
Tagged list containing objects for running a VAST model
\describe{
  \item{MeshList}{A tagged list with inputs related to the SPDE mesh}
  \item{GridList}{A tagged list with inputs related to the 2D AR1 grid}
  \item{a_xl}{A data frame with areas for each knot and each strattum}
  \item{loc_UTM}{A data frame with the converted UTM coordinates for each sample}
  \item{Kmeans}{Output from \code{Calc_Kmeans} with knots for a triangulated mesh}
  \item{knot_i}{The knot associated with each sample}
  \item{Method}{The Method input (for archival purposes)}
  \item{loc_x}{The UTM location for each knot}
}
}
\description{
\code{make_spatial_info} builds a tagged list with all the spatial information needed for \code{Data_Fn}
}
\details{
\code{fine_scale=TRUE} is a new feature starting in V8.0.0 which triggers two major changes: (1) projecting Gaussian Markov random fields from knots to sampling and extrapolation-grid locations using bilinear interpolation (i.e., piecewise linear smoothing), and (2) including density covariates individually for extrapolation-grid and sampling locations. \code{fine_scale=FALSE} is designed to be backwards compatible with earlier versions, although V8.0.0 may also require changes to input naming conventions for covariates to specify the same model and attain the same fit.

\code{LON_intensity} and \code{LAT_intensity} allow users to specify locations that are used by the k-means algorithm to determine the location of knots, where e.g. users can either hard-code the desired knot locations via these inputs (using \code{n_x} greater than this number of locations), or use the extrapolation-grid to ensure that knots are located proportional to that grid.
}
